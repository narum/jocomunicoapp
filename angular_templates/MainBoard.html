<!-- This view is the main board where the picto will be shown. In addition it 
     includes others view like sentece, edit (board/cell) panel, etc etc
-->
<link rel="stylesheet" type="text/css" href="css/editCell.css">
<link rel="stylesheet" href="css/style-jc.css"/>
<audio id="utterance" src="{{sound}}" type="audio/mp3"></audio>
<style>html, body, .container-table{height: 100%;height: 100vh;background: url('{{img.fons}}') no-repeat center center fixed;
    -webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;}
</style>
<!--menu superior dropdown-->
<div ng-include="'/angular_templates/dropdownMenuBar.html'"></div>
<div id="main" style="background-image: url('/img/srcWeb/fons.png');background-size:100% 100%">
                  
    <div class="row mainBoard" ng-init="config()" ng-click="scanLeftClick()" ng-right-click="scanRightClick()" ng-mousedown="playLongClick()" ng-mouseup="cancelLongClick()" ng-style="!inEdit ? {'padding':'3px'}:{}">

        <div  ng-if="(cfgPredOnOff === '1' && cfgPredBarVertHor === '0')" id="predView" ng-if="inPred" class="col-xs-{{predViewWidth}}">
            <div  class="row fullheight">
                <div class="col-xs-12" ng-include="baseurl + '/angular_templates/PredView.html'">
                </div>
            </div>
        </div>

        <div id="userview" class="col-xs-{{userViewWidth}}" style="height:{{userViewHeight}}%" >
            <div class="col-xs-12" ng-if="cfgSentenceBarUpDown === '0' && !inEdit" style="height:{{sentenceViewHeight}}%;margin-bottom: 1vh">
                <div class="row fullheight" ng-include="baseurl + '/angular_templates/SentenceView.html'">                     
                </div>
            </div>

            <div class="col-xs-12" style="height:{{boardHeight}}%">
                <div class="row fullheight imgRounded boardPadding" style="background-image: url(img/srcWeb/Patterns1-08.png)">

                    <div ng-if="inScan && isScanningCancel == true" class="imgRounded returnScanContainer" style="position: absolute;">
                        <div class="imgRounded returnScanContent">
                            <img class="returnScanIcon" ng-src="/img/srcWeb/falta_picto.png"/>
                        </div>
                    </div>

                    <div class="col-xs-12 " ng-repeat="picto in data" ng-style="{'width':'{{100 / columns}}%','height':'{{100 / rows}}% '}" ng-click="isClickEnable()?clickOnCell(picto):null" ng-right-click="openEditCellMenu({{picto.posInBoard}});" ng-mouseenter="cfgTimeOverOnOff?TimeoutOverClick(0,picto):null" ng-mouseleave="cfgTimeOverOnOff?CancelTimeoutOverClick():null" ng-drop="inEdit" ng-drop-success="onDropSwap({{picto.posInBoard}},$data,$event)" ng-drag="inEdit && !fv.painting" ng-drag-data="{posInBoardPicto:'{{picto.posInBoard}}'}" data-allow-transform="true" >
                        <img ng-if="picto.boardLink != null" class="sfolder" ng-src="{{baseurl}}img/srcWeb/folder.png"/>
                        
                        <div class="backgroundCell" ng-style="{'background-color':'#{{picto.color}}'}"></div>
                        <!-- put the scan color over the image.
                             Only if we are in Scan mode
                        MODIF: AÃ±adir variable if inScan-->

                        <div ng-if="isScanned(picto);" class="scaneo"></div>

                        <div ng-if="isPictoActive(picto) && cfgTextInCell && picto.textInCell !== null" class="textCell">{{picto.textInCell}}</div>
                        <div ng-if="isPictoActive(picto) && cfgTextInCell && picto.textInCell === null && picto.pictotext !== null" class="textCell">{{picto.pictotext}}</div>
                        <div ng-if="isPictoActive(picto) && cfgTextInCell && picto.textInCell === null && picto.pictotext === null" class="textCell">{{picto.textFunction}}</div>


                        <img ng-if="isPictoActive(picto) && picto.ID_CFunction !== null" ng-src="{{baseurl}}img/srcWeb/functions.png" class="function"/>

                        <div ng-if="isPictoActive(picto)" class="contentCell">
                            <!--MODIF: deberia ser con texto on/off???-->
                            <div ng-style="cfgTextInCell ? {'height':'78%'}:{'height':'100%'}">
                                <img ng-if="picto.imgCell" class="imgResponsive" ng-src="{{baseurl}}{{picto.imgCell}}"/>   
                                <img ng-if="picto.imgPicto && !picto.imgCell" ng-src="{{baseurl}}img/pictos/{{picto.imgPicto}}" class="imgResponsive"/>
                                <img ng-if="picto.imgFunct && !picto.imgPicto && !picto.imgCell" ng-src="{{baseurl}}img{{picto.imgFunct}}" class="imgResponsive"/>
                            </div>
                        </div>

                        <!-- Else, puts a "empty image" and mades it dropable
                             Only if we are in edit mode-->
                        <div ng-if="!picto.imgPicto && !picto.imgCell && !isPictoActive(picto)" class="contentCell">
                            <!--There is no text -->
                        </div>
                    </div>
                </div>
            </div>
            <div id="sentenceView" class="col-xs-12" ng-if="cfgSentenceBarUpDown === '1' && !inEdit" style="height:{{sentenceViewHeight}}%;margin-top: 1vh">
                <div class="row fullheight" ng-include="baseurl + '/angular_templates/SentenceView.html'">                     
                </div>
            </div>
        </div>


        <div ng-if="inEdit" class="col-xs-{{editViewWidth}} fullheight" style="height:{{userViewHeight}}%">
            <div id="trashview" class="row fullheight">
                <div class="col-xs-12" ng-include="baseurl + '/angular_templates/EditViewTrash.html'">

                </div>
            </div>
            <div id="searchView" class="row fullheight">
                <div class="col-xs-12" ng-include="baseurl + '/angular_templates/EditView.html'">

                </div>
            </div>
        </div>
        <div ng-if="inEdit" class="col-xs-12" id="searchFolder" ng-include="baseurl + '/angular_templates/EditFolder.html'" style="height: {{searchFolderHeight}}%">
        </div>
        <!-- MODIF: Poner control si no scan-->

    </div>
    <!-- MODIF: Poner control si no scan-->
    <div ng-if="puntuando" class="scoreContainer">
            <div class="scoreContainerLeft">
                <img src="/img/srcWeb/feliz_1.png" class="goodPhrase" ng-click="isClickEnable()?feedback(1):null" ng-mouseenter="cfgTimeOverOnOff?TimeoutOverClick(3,'Good'):null" ng-mouseleave="cfgTimeOverOnOff?CancelTimeoutOverClick():null" ng-class="{'scaneo': isScanning == 'goodPhrase'}"/>
            </div>

            <div class="scoreContainerRight">
                <img src="/img/srcWeb/triste_1.png" class="goodPhrase" ng-click="isClickEnable()?feedback(0):null" ng-mouseenter="cfgTimeOverOnOff?TimeoutOverClick(3,'Bad'):null" ng-mouseleave="cfgTimeOverOnOff?CancelTimeoutOverClick():null" ng-class="{'scaneo': isScanning == 'badPhrase'}"/>
            </div>
    </div>
</div>
<!--ErrorVoicesModal-->
                                            <div class="modal fade" id="errorVoicesModal" role="dialog">
                                                <div class="modal-dialog modal-lg">
                                                    <div class="row marginModalTop"><img class="img-owl pull-right" src='/img/srcWeb/Mus/lowSorpresaFlecha.png'/></div>
                                                    <div class="row" id="boxUserConfig" style="background-image: url('/img/srcWeb/Patterns1-08.png')">
                                                        <div id="header" class="row">
                                                            <div class="col-xs-10 headerTitle">{{content.errorVoicesTitle}}</div>
                                                        </div>
                                                        <div class="row backgroundUserConfigBox">
                                                            <div class="row fonsAlert">
                                                                <div class="col-xs-1 text-center"><img class="img-Alert" src='/img/icons/info alert.png'/></div>
                                                                <div class="col-xs-11">{{content.error}}</div>
                                                            </div>
                                                            <div class="row dadesUsuariCentre">
                                                                <div class="col-xs-1"></div>
                                                                <div class="col-xs-11">
                                                                    <div class="row">{{errorMessage}}</div>
                                                                    <div class="row verticalMarginTop">
                                                                        <div class="col-xs-6 textError">
                                                                            Error {{errorCode}}
                                                                        </div>
                                                                        <div class="col-xs-6">
                                                                            <button type="reset" class="btn-gray pull-right" data-dismiss="modal">{{content.ok}}</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    <div class="row verticalMarginTop"></div>
                                                    </div>
                                                </div>
                                            </div>



