<!-- This view is the main board where the picto will be shown. In addition it 
     includes others view like sentece, edit (board/cell) panel, etc etc
-->
<link rel="stylesheet" href="css/historic.css"/>
<audio id="utterance" src="{{sound}}" type="audio/mp3"></audio>
<style>html, body, .container-table{height: 100%;height: 100vh;background: url('{{img.fons}}') no-repeat center center fixed;
                             -webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;}
    </style>

    <script>

        var myVar;
        var exit = 0;
        function audiohallelujah() {
            console.log("audio");
            var aux = document.getElementById('utterance');
            aux.src = "mp3/empty.m4a";
            var audiotoplayinitial = aux.src;
            var myVar = setInterval(function () {
                waitloop(audiotoplayinitial, myVar)
            }, 500);
        }

        function waitloop(audiotoplayinitial, myVar) {
            var aux = document.getElementById('utterance');
            var audiotoplayfinal = aux.src;
            if (audiotoplayinitial !== audiotoplayfinal) {
                exit = 0;
                aux.play();
                clearInterval(myVar);
            }

            exit = exit + 1;
            if (exit > 8) {
                exit = 0;
                clearInterval(myVar);
            }
        }
    </script>

    <!--menu superior dropdown-->
    <div id="main" style="background-image: url('/img/srcWeb/patterns/fons.png');background-size:100% 100%" ng-click="scanLeftClick()" ng-right-click="scanRightClick()">
    <div class="row historicView">
        <div class="col-xs-12 containerHistoric">
            <div ng-if="isScanning == '1row'" class="scaneo"></div>
            <div class="col-xs-1 fullheight">
                <div ng-if="isScanning == 'back'" class="scaneo"></div>
                <div class="backgroundBack" ng-click="!inScan ? back();">
                    <img class="imgResponsiveBack icon " ng-src="{{baseurl}}img/srcWeb/Menu/enradera_icon.png"/>
                </div>
            </div>
            <div class="col-xs-1 fullheight">
                <div ng-if="isScanning == 'home'" class="scaneo"></div>
                <div class="backgroundHome" ng-click="!inScan ?home();">
                    <img class="imgResponsive icon " ng-src="{{baseurl}}img/srcWeb/Menu/inici_icon.png"/>
                </div>
            </div>
            <div class="col-xs-10 holderButtons" style="background-image: url('/img/srcWeb/patterns/pattern{{cfgBgColorMenu}}.png')">
                <div class="col-xs-4 buttonPadding" ng-click="!inScan ?getTodayHistoric();">
                    <div ng-if="isScanning == 'today'" class="scaneoButton"></div>
                    <div ng-class="timeHis == 'today' ? 'timeButtonAcitve' : 'timeButton'">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.today}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>
                        </div>
                    </div>
                </div>
                <div class="col-xs-4 buttonPadding" ng-click="!inScan ?getLastWeekHistoric();">
                    <div ng-if="isScanning == 'lastWeek'" class="scaneoButton"></div>
                    <div ng-class="timeHis == 'lastWeek' ? 'timeButtonAcitve' : 'timeButton'">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.lastWeek}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>
                        </div>
                    </div>
                </div>
                <div class="col-xs-4 buttonPadding" ng-click="!inScan ?getLastMonthHistoric();">
                    <div ng-if="isScanning == 'lastMonth'" class="scaneoButton"></div>
                    <div ng-class="timeHis == 'lastMonth' ? 'timeButtonAcitve' : 'timeButton'">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.lastMonth}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- MODIF: Poner nombre de lo que hace. -->
        <div class="col-xs-12 containerHistoric" >
            <div ng-if="isScanning == '2row'" class="scaneo"></div>
            <div class="col-xs-1 fullheight">
                <div class="col-xs-6 fullheight">
                    <div ng-if="isScanning == 'backPagHistoric'" class="scaneo"></div>
                    <div ng-if="pagBackHistoricEnabled" class="backgroundBack" ng-click="!inScan ?previousPagHistoric();" style="right:0px">
                        <img class="imgResponsiveBack icon " ng-src="{{baseurl}}img/srcWeb/Menu/enradera_icon.png"/>
                    </div>
                </div>
                <div class="col-xs-6 fullheight">
                    <div ng-if="isScanning == 'nextPagHistoric'" class="scaneo"></div>
                    <div ng-if="pagNextHistoricEnabled" class="backgroundBack" ng-click="!inScan ?nextPagHistoric();" style="right:0px">
                        <img class="imgResponsiveBack icon " ng-src="{{baseurl}}img/srcWeb/Menu/endavant_icon.png"/>
                    </div>
                </div>
            </div>
            <div class="col-xs-10 holderButtons" style="background-image: url('/img/srcWeb/patterns/pattern{{cfgBgColorMenu}}.png')">
                <div class="col-xs-3 buttonPadding" ng-repeat="sFolder in sFolderResult| limitTo:pagSFolder + 4" ng-if="$index >= pagSFolder" >
                    <div  ng-class="folder == sFolder.ID_Folder ? 'folderHistoricButtonActive' : 'folderHistoricButton'" ng-click="!inScan ?changeFolder(sFolder.ID_Folder);">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{sFolder.folderName}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="{{sFolder.imgSFolder}}"/>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-1 fullheight">
                <div class="col-xs-6 fullheight">
                    <div ng-if="isScanning == 'backPagFolder'" class="scaneo"></div>
                    <div ng-if="pagBackFolderEnabled" class="backgroundBack" ng-click="!inScan ?previousPagSFolder();" style="right:0px">
                        <img class="imgResponsiveBack icon " ng-src="{{baseurl}}img/srcWeb/Menu/enradera_icon.png"/>
                    </div>
                </div>
                <div class="col-xs-6 fullheight">
                    <div ng-if="isScanning == 'nextPagFolder'" class="scaneo"></div>
                    <div ng-if="pagNextFolderEnabled" class="backgroundBack" ng-click="!inScan ?nextPagSFolder();" style="right:0px">
                        <img class="imgResponsiveBack icon " ng-src="{{baseurl}}img/srcWeb/Menu/endavant_icon.png"/>
                    </div>
                </div>
            </div>
        </div>

        <!--MODIF: otro nombre -->
        <div class="col-xs-12 historicContainer" style="background-image: url('/img/srcWeb/patterns/pattern{{cfgBgColorPanel}}.png')">
            <div class="col-xs-12 scrollHistoric" ng-scrollbar rebuild-on-resize rebuild-on="rebuild:me" is-bar-shown="isScroll">
                <div class="col-xs-6 sentencePadding" ng-if="timeHis != null" ng-repeat="h in historic">
                    <div class="col-xs-11 sentenceBackground">
                        <div class="col-xs-1 sentenceCell" ng-repeat="p in h[1] | limitTo:9">
                            <div class="col-xs-12 fullheight" ng-class="{'col-xs-9': p.isplural == 1 || p.isfem == 1}">
                                <img ng-if="p.imgtemp != null && p.imgtemp != ''" ng-src="{{baseurl}}{{p.imgtemp}}" class="imgResponsiveHistoric"/>
                                <img ng-if="p.imgtemp == null || p.imgtemp == ''" ng-src="{{baseurl}}img/pictos/{{p.imgPicto}}" class="imgResponsiveHistoric"/>
                            </div>
                            <div ng-if="p.isplural == 1" class="col-xs-3" style="height:50%;">
                                <img class="iconResponsive" ng-src="{{baseurl}}img/pictos/plural.png"/>
                            </div>
                            <div ng-if="p.isfem == 1" class="col-xs-3" style="height:50%;">
                                <img class="iconResponsive" ng-src="{{baseurl}}img/pictos/femenino.png"/>
                            </div>
                        </div>
                        <!--Display the phrase-->
                        <div class="col-xs-12 phraseText text-uppercase">
                            {{h[0].generatorString}}
                        </div>
                    </div>
                    <div class="col-xs-1 sentenceCellIndicator">
                        <div class="col-xs-12  indicatorTenseSentence" ng-class="{'indicatorNegativeSentence':h[0].isNegativa}">
                            <img ng-if='h[0].sentenceTense != "defecte"' class="imgResponsive" width="100%" height="100%" ng-src="/img/indicadors/{{h[0].sentenceTense}}.png"/>
                        </div>
                        <div class="col-xs-12 indicatorTipusSentence">
                            <img ng-if='h[0].sentenceType != "defecte"' class="imgResponsive" width="100%" height="100%" ng-src="/img/indicadors/{{h[0].sentenceType}}.png"/>
                        </div>
                    </div>
                </div>
                
                <div class="col-xs-6 sentencePadding" ng-if="folder != null" ng-repeat="h in historic">
                    <div class="col-xs-11 sentenceBackground">
                        <div class="col-xs-1 sentenceCell" ng-repeat="p in h[1] | limitTo:9">
                            <div class="col-xs-12 fullheight" ng-class="{'col-xs-9': p.isplural == 1 || p.isfem == 1}">
                                <img ng-if="p.imgtemp != null && p.imgtemp != ''" ng-src="{{baseurl}}{{p.imgtemp}}" class="imgResponsiveHistoric"/>
                                <img ng-if="p.imgtemp == null || p.imgtemp == ''" ng-src="{{baseurl}}img/pictos/{{p.imgPicto}}" class="imgResponsiveHistoric"/>
                            </div>
                            <div ng-if="p.isplural == 1" class="col-xs-3" style="height:50%;">
                                <img class="iconResponsive" ng-src="{{baseurl}}img/pictos/plural.png"/>
                            </div>
                            <div ng-if="p.isfem == 1" class="col-xs-3" style="height:50%;">
                                <img class="iconResponsive" ng-src="{{baseurl}}img/pictos/femenino.png"/>
                            </div>
                        </div>
                        <!--Display the phrase-->
                        <div class="col-xs-12 phraseText text-uppercase">
                            {{h[0].generatorString}}
                        </div>
                    </div>
                    <div class="col-xs-1 sentenceCellIndicator">
                        <div class="col-xs-12  indicatorTenseSentence" ng-class="{'indicatorNegativeSentence':h[0].isNegativa}">
                            <img ng-if='h[0].sentenceTense != "defecte"' class="imgResponsive" width="100%" height="100%" ng-src="/img/indicadors/{{h[0].sentenceTense}}.png"/>
                        </div>
                        <div class="col-xs-12 indicatorTipusSentence">
                            <img ng-if='h[0].sentenceType != "defecte"' class="imgResponsive" width="100%" height="100%" ng-src="/img/indicadors/{{h[0].sentenceType}}.png"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>  

