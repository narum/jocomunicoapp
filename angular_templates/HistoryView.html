<!-- This view is the main board where the picto will be shown. In addition it 
     includes others view like sentece, edit (board/cell) panel, etc etc
-->
<link rel="stylesheet" href="css/history.css"/>
<audio id="utterance" src="{{sound}}" type="audio/mp3"></audio>
<style>html, body, .container-table{height: 100%;height: 100vh;background: url('{{img.fons}}') no-repeat center center fixed;
                             -webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;}
    </style>

    <script>

        var myVar;
        var exit = 0;
        function audiohallelujah() {
            console.log("audio");
            var aux = document.getElementById('utterance');
            aux.src = "mp3/empty.m4a";
            var audiotoplayinitial = aux.src;
            var myVar = setInterval(function () {
                waitloop(audiotoplayinitial, myVar)
            }, 500);
        }

        function waitloop(audiotoplayinitial, myVar) {
            var aux = document.getElementById('utterance');
            var audiotoplayfinal = aux.src;
            if (audiotoplayinitial !== audiotoplayfinal) {
                exit = 0;
                aux.play();
                clearInterval(myVar);
            }

            exit = exit + 1;
            if (exit > 8) {
                exit = 0;
                clearInterval(myVar);
            }
        }
    </script>

    <!--menu superior dropdown-->
    <div id="main" style="background-image: url('/img/srcWeb/patterns/fons.png');background-size:100% 100%">
    <div class="row historyView">
        <div class="col-xs-12 containerHistory" >
            <div class="col-xs-1 fullheight">
                <div class="backgroundBack" ng-click="back();">
                    <img class="imgResponsiveBack icon " ng-src="{{baseurl}}img/srcWeb/Menu/enradera_icon.png"/>
                </div>
            </div>
            <div class="col-xs-1 fullheight">
                <div class="backgroundHome" ng-click="home();">
                    <img class="imgResponsive icon " ng-src="{{baseurl}}img/srcWeb/Menu/inici_icon.png"/>
                </div>
            </div>
            <div class="col-xs-10 holderButtons">
                <div class="col-xs-4 buttonPadding" ng-click="getTodayHistory();">
                    <div class="timeButton">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.today}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>

                        </div>
                    </div>
                </div>
                <div class="col-xs-4 buttonPadding" ng-click="getLastWeekHistory();">
                    <div class="timeButton">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.lastWeek}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>

                        </div>
                    </div>
                </div>
                <div class="col-xs-4 buttonPadding" ng-click="getLastMonthHistory();">
                    <div class="timeButton">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.lastMonth}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- MODIF: POner nombre de lo que hace. -->
        <div class="col-xs-12 containerHistory" >
            <div class="col-xs-11 holderButtons">
                <div class="col-xs-3 buttonPadding" ng-click="changeFolder();">
                    <div class="folderHistoryButton">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.today}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>

                        </div>
                    </div>
                </div>
                <div class="col-xs-3 buttonPadding" ng-click="changeFolder();">
                    <div class="folderHistoryButton">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.lastWeek}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>

                        </div>
                    </div>
                </div>
                <div class="col-xs-3 buttonPadding" ng-click="changeFolder();">
                    <div class="folderHistoryButton">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.lastMonth}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>

                        </div>
                    </div>
                </div>
                <div class="col-xs-3 buttonPadding" ng-click="changeFolder();">
                    <div class="folderHistoryButton">
                        <div class="col-xs-8 fullheight">
                            <div class="buttonText">{{content.lastMonth}}</div>
                        </div>
                        <div class="col-xs-4 fullheight">
                            <img class="imgResponsive icon" ng-src="/img/pictosespeciales/hoy.png"/>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-1 fullheight">
                <div class="col-xs-6 fullheight">
                    <div class="backgroundBack" ng-click="back2();">
                        <img class="imgResponsiveBack icon " ng-src="{{baseurl}}img/srcWeb/Menu/enradera_icon.png"/>
                    </div>
                </div>
                <div class="col-xs-6 fullheight">
                    <div class="backgroundHome" ng-click="next();">
                        <img class="imgResponsive icon " ng-src="{{baseurl}}img/srcWeb/Menu/inici_icon.png"/>
                    </div>
                </div>
            </div>
        </div>

        <!--MODIF: otro nombre -->
        <div class="col-xs-12 historyContainer" style="background-image: url({{img.Patterns1_08}})">
            <div class="col-xs-12 scrollHistory" ng-scrollbar rebuild-on-resize rebuild-on="rebuild:me" is-bar-shown="isScroll">
                <div class="col-xs-12 panelContainer" ng-repeat="panel in panels" on-Finish-Loop="scrollbarPanel">
                    <div class="col-xs-8 text-center fullheight">
                        <input type="text" class="form-control text-center panelTitle"  name="NameBoard" ng-model="panel.GBname" ng-value="panel.GBname" ng-change="changeGroupBoardName(panel.GBname, panel.ID_GB)"/>
                    </div>
                    <div class="col-xs-4 editaPanel text-center" ng-click="editPanel(panel.ID_GB)">
                        {{content.edit}} <img ng-src="{{baseurl}}/img/icons/edit_blanc.png" width="15%" height="50%"/>
                    </div>
                    <div ng-if="panel.primaryGroupBoard == 0" class="col-xs-4 noPrimaryPanel text-center" ng-click="setPrimary(panel.ID_GB)">
                        {{content.makePrimary}}
                    </div>
                    <div ng-if="panel.primaryGroupBoard == 1" class="col-xs-4 primaryPanel text-center">
                        {{content.primary}}
                    </div>
                    <div class="col-xs-4 nouPanel text-center" ng-click="copyGroupBoard(panel.ID_GB)">
                        {{content.new}} <img ng-src="{{baseurl}}/img/icons/file_blanc.png" width="15%" height="50%"/>
                    </div>
                </div>
            </div>
        </div>  

    </div>
</div>
